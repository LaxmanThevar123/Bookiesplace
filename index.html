<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookiesPlace - Online Book Catalogue</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; font-size: 18px; }
        .header { background: #2c3e50; color: white; padding: 20px; text-align: center; }
        .header h1 { font-size: 32px; margin-bottom: 10px; }
        .contact { font-size: 20px; margin-top: 10px; }
        .admin-btn { position: fixed; top: 20px; right: 20px; background: #e74c3c; color: white; border: none; padding: 12px 20px; border-radius: 5px; cursor: pointer; font-size: 16px; z-index: 100; }
        .search-bar { padding: 20px; background: white; margin: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .search-bar input { width: 100%; padding: 15px; font-size: 18px; border: 2px solid #ddd; border-radius: 5px; }
        .filters { padding: 20px; margin: 0 20px; background: white; border-radius: 8px; display: flex; gap: 10px; flex-wrap: wrap; }
        .filter-btn { padding: 12px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        .filter-btn.active { background: #2980b9; }
        .books-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; padding: 20px; }
        .book-card { background: white; border-radius: 8px; padding: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .book-cover { width: 100%; height: 200px; object-fit: cover; border-radius: 5px; background: #ddd; }
        .book-title { font-size: 20px; font-weight: bold; margin: 10px 0; color: #2c3e50; }
        .book-author { color: #7f8c8d; font-size: 16px; margin-bottom: 8px; }
        .book-category { display: inline-block; background: #3498db; color: white; padding: 5px 10px; border-radius: 3px; font-size: 14px; margin-bottom: 8px; }
        .book-summary { color: #555; font-size: 15px; line-height: 1.5; margin-top: 8px; }
        .book-price { font-size: 22px; font-weight: bold; color: #27ae60; margin-top: 10px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; overflow-y: auto; }
        .modal-content { background: white; margin: 50px auto; padding: 30px; max-width: 600px; border-radius: 8px; }
        .modal-content h2 { margin-bottom: 20px; font-size: 26px; }
        .modal-content input, .modal-content textarea, .modal-content select { width: 100%; padding: 12px; margin: 10px 0; font-size: 16px; border: 2px solid #ddd; border-radius: 5px; }
        .modal-content button { padding: 12px 25px; margin: 10px 5px; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; }
        .btn-primary { background: #27ae60; color: white; }
        .btn-secondary { background: #95a5a6; color: white; }
        .btn-danger { background: #e74c3c; color: white; }
        .admin-panel { padding: 20px; }
        .admin-actions { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .book-list-item { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; }
        .no-books { text-align: center; padding: 50px; font-size: 20px; color: #7f8c8d; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸ“š BookiesPlace</h1>
        <p>Your Online Book Store</p>
        <div class="contact">ðŸ“ž Contact: +1-234-567-8900</div>
    </div>

    <button class="admin-btn" onclick="showAdminLogin()">Admin</button>

    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="ðŸ” Search by book name or author..." oninput="filterBooks()">
    </div>

    <div class="filters">
        <button class="filter-btn active" onclick="filterByCategory('All')">All</button>
        <button class="filter-btn" onclick="filterByCategory('Fiction')">Fiction</button>
        <button class="filter-btn" onclick="filterByCategory('History')">History</button>
        <button class="filter-btn" onclick="filterByCategory('Mystery')">Mystery</button>
        <button class="filter-btn" onclick="filterByCategory('Fantasy')">Fantasy</button>
        <button class="filter-btn" onclick="filterByCategory('Romance')">Romance</button>
        <button class="filter-btn" onclick="filterByCategory('Science')">Science</button>
        <button class="filter-btn" onclick="filterByCategory('Biography')">Biography</button>
    </div>

    <div class="books-grid" id="booksGrid"></div>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="modal">
        <div class="modal-content">
            <h2>Admin Login</h2>
            <input type="password" id="adminPassword" placeholder="Enter password">
            <button class="btn-primary" onclick="adminLogin()">Login</button>
            <button class="btn-secondary" onclick="closeModal('adminLoginModal')">Cancel</button>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div id="adminPanelModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <h2>Admin Panel</h2>
            <div class="admin-actions">
                <button class="btn-primary" onclick="showAddBookForm()">Add New Book</button>
                <button class="btn-primary" onclick="exportBackup()">ðŸ“¥ Export Backup</button>
                <button class="btn-primary" onclick="document.getElementById('importFile').click()">ðŸ“¤ Import Backup</button>
                <input type="file" id="importFile" style="display:none" accept=".json" onchange="importBackup(event)">
                <button class="btn-secondary" onclick="closeModal('adminPanelModal')">Close</button>
            </div>
            <div id="adminBooksList"></div>
        </div>
    </div>

    <!-- Add/Edit Book Modal -->
    <div id="bookFormModal" class="modal">
        <div class="modal-content">
            <h2 id="formTitle">Add New Book</h2>
            <input type="text" id="bookTitle" placeholder="Book Title">
            <input type="text" id="bookAuthor" placeholder="Author Name">
            <select id="bookCategory">
                <option value="Fiction">Fiction</option>
                <option value="History">History</option>
                <option value="Mystery">Mystery</option>
                <option value="Fantasy">Fantasy</option>
                <option value="Romance">Romance</option>
                <option value="Science">Science</option>
                <option value="Biography">Biography</option>
            </select>
            <textarea id="bookSummary" placeholder="Book Summary" rows="4"></textarea>
            <input type="number" id="bookPrice" placeholder="Price (e.g., 15.99)" step="0.01">
            <input type="text" id="bookISBN" placeholder="ISBN (optional - for cover image)">
            <button class="btn-primary" onclick="saveBook()">Save Book</button>
            <button class="btn-secondary" onclick="closeModal('bookFormModal')">Cancel</button>
        </div>
    </div>

    <script>
        const ADMIN_PASSWORD = "bookies2024";
        let books = [];
        let currentFilter = 'All';
        let editingBookId = null;

        // Initialize
        function init() {
            loadBooks();
            if (books.length === 0) {
                loadDefaultBooks();
            }
            displayBooks();
            setupAutoBackup();
        }

        // Load books from localStorage
        function loadBooks() {
            const stored = localStorage.getItem('bookiesplace_books');
            if (stored) {
                books = JSON.parse(stored);
            }
        }

        // Save books to localStorage
        function saveBooks() {
            localStorage.setItem('bookiesplace_books', JSON.stringify(books));
        }

        // Load default 2500+ books
        function loadDefaultBooks() {
            const categories = ['Fiction', 'History', 'Mystery', 'Fantasy', 'Romance', 'Science', 'Biography'];
            const authors = ['James Patterson', 'Stephen King', 'J.K. Rowling', 'Dan Brown', 'Agatha Christie', 'George R.R. Martin', 'Jane Austen', 'Ernest Hemingway', 'Mark Twain', 'Charles Dickens', 'Leo Tolstoy', 'F. Scott Fitzgerald', 'Harper Lee', 'Gabriel Garcia Marquez', 'Margaret Atwood', 'Toni Morrison', 'John Steinbeck', 'Virginia Woolf', 'Oscar Wilde', 'Emily Bronte'];
            
            const summaries = {
                Fiction: ['A compelling story of love and loss.', 'An unforgettable journey through time.', 'A tale of redemption and hope.', 'A gripping narrative of human resilience.'],
                History: ['A detailed account of historical events.', 'Exploring the past with vivid detail.', 'Chronicles of a bygone era.', 'Historical insights that shape our present.'],
                Mystery: ['A thrilling whodunit that keeps you guessing.', 'Unravel the mystery page by page.', 'A detective story full of twists.', 'Suspense that grips you till the end.'],
                Fantasy: ['An epic adventure in magical realms.', 'Where magic and reality collide.', 'A fantastical journey beyond imagination.', 'Dragons, wizards, and epic quests.'],
                Romance: ['A heartwarming love story.', 'Passion and romance intertwined.', 'Love conquers all in this tale.', 'A beautiful story of two hearts.'],
                Science: ['Exploring the wonders of science.', 'Scientific discoveries that changed the world.', 'A journey through scientific innovation.', 'Understanding our universe through science.'],
                Biography: ['The inspiring life story of a legend.', 'A remarkable journey of achievement.', 'From humble beginnings to greatness.', 'The life and times of an icon.']
            };

            for (let i = 1; i <= 2500; i++) {
                const category = categories[Math.floor(Math.random() * categories.length)];
                const author = authors[Math.floor(Math.random() * authors.length)];
                const summaryList = summaries[category];
                const summary = summaryList[Math.floor(Math.random() * summaryList.length)];
                const price = (Math.random() * 30 + 5).toFixed(2);

                books.push({
                    id: Date.now() + i,
                    title: `${category} Book ${i}`,
                    author: author,
                    category: category,
                    summary: summary,
                    price: price,
                    cover: `https://via.placeholder.com/200x300/3498db/ffffff?text=${category}+${i}`
                });
            }
            saveBooks();
        }

        // Display books
        function displayBooks() {
            const grid = document.getElementById('booksGrid');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            let filtered = books.filter(book => {
                const matchesCategory = currentFilter === 'All' || book.category === currentFilter;
                const matchesSearch = book.title.toLowerCase().includes(searchTerm) || 
                                     book.author.toLowerCase().includes(searchTerm);
                return matchesCategory && matchesSearch;
            });

            if (filtered.length === 0) {
                grid.innerHTML = '<div class="no-books">No books found</div>';
                return;
            }

            grid.innerHTML = filtered.map(book => `
                <div class="book-card">
                    <img class="book-cover" src="${book.cover}" alt="${book.title}" onerror="this.src='https://via.placeholder.com/200x300/95a5a6/ffffff?text=No+Cover'">
                    <div class="book-title">${book.title}</div>
                    <div class="book-author">by ${book.author}</div>
                    <span class="book-category">${book.category}</span>
                    <div class="book-summary">${book.summary}</div>
                    <div class="book-price">$${book.price}</div>
                </div>
            `).join('');
        }

        // Filter by category
        function filterByCategory(category) {
            currentFilter = category;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            displayBooks();
        }

        // Filter books by search
        function filterBooks() {
            displayBooks();
        }

        // Admin login
        function showAdminLogin() {
            document.getElementById('adminLoginModal').style.display = 'block';
        }

        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                closeModal('adminLoginModal');
                showAdminPanel();
            } else {
                alert('Incorrect password!');
            }
            document.getElementById('adminPassword').value = '';
        }

        // Show admin panel
        function showAdminPanel() {
            document.getElementById('adminPanelModal').style.display = 'block';
            displayAdminBooks();
        }

        // Display books in admin panel
        function displayAdminBooks() {
            const list = document.getElementById('adminBooksList');
            list.innerHTML = books.map(book => `
                <div class="book-list-item">
                    <div>
                        <strong>${book.title}</strong> by ${book.author} - $${book.price}
                    </div>
                    <div>
                        <button class="btn-primary" onclick="editBook(${book.id})">Edit</button>
                        <button class="btn-danger" onclick="deleteBook(${book.id})">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        // Show add book form
        function showAddBookForm() {
            editingBookId = null;
            document.getElementById('formTitle').textContent = 'Add New Book';
            document.getElementById('bookTitle').value = '';
            document.getElementById('bookAuthor').value = '';
            document.getElementById('bookCategory').value = 'Fiction';
            document.getElementById('bookSummary').value = '';
            document.getElementById('bookPrice').value = '';
            document.getElementById('bookISBN').value = '';
            document.getElementById('bookFormModal').style.display = 'block';
        }

        // Edit book
        function editBook(id) {
            const book = books.find(b => b.id === id);
            if (!book) return;

            editingBookId = id;
            document.getElementById('formTitle').textContent = 'Edit Book';
            document.getElementById('bookTitle').value = book.title;
            document.getElementById('bookAuthor').value = book.author;
            document.getElementById('bookCategory').value = book.category;
            document.getElementById('bookSummary').value = book.summary;
            document.getElementById('bookPrice').value = book.price;
            document.getElementById('bookFormModal').style.display = 'block';
        }

        // Save book
        async function saveBook() {
            const title = document.getElementById('bookTitle').value.trim();
            const author = document.getElementById('bookAuthor').value.trim();
            const category = document.getElementById('bookCategory').value;
            const summary = document.getElementById('bookSummary').value.trim();
            const price = document.getElementById('bookPrice').value;
            const isbn = document.getElementById('bookISBN').value.trim();

            if (!title || !author || !summary || !price) {
                alert('Please fill all required fields!');
                return;
            }

            let cover = `https://via.placeholder.com/200x300/3498db/ffffff?text=${category}`;
            
            // Fetch cover from Open Library if ISBN provided
            if (isbn) {
                cover = `https://covers.openlibrary.org/b/isbn/${isbn}-M.jpg`;
            }

            if (editingBookId) {
                const index = books.findIndex(b => b.id === editingBookId);
                books[index] = { ...books[index], title, author, category, summary, price, cover };
            } else {
                books.push({
                    id: Date.now(),
                    title,
                    author,
                    category,
                    summary,
                    price,
                    cover
                });
            }

            saveBooks();
            displayBooks();
            displayAdminBooks();
            closeModal('bookFormModal');
        }

        // Delete book
        function deleteBook(id) {
            if (confirm('Are you sure you want to delete this book?')) {
                books = books.filter(b => b.id !== id);
                saveBooks();
                displayBooks();
                displayAdminBooks();
            }
        }

        // Export backup
        function exportBackup() {
            const dataStr = JSON.stringify(books, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `bookiesplace_backup_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            alert('Backup exported successfully!');
        }

        // Import backup
        function importBackup(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (confirm('This will replace all current books. Continue?')) {
                        books = imported;
                        saveBooks();
                        displayBooks();
                        displayAdminBooks();
                        alert('Backup imported successfully!');
                    }
                } catch (err) {
                    alert('Invalid backup file!');
                }
            };
            reader.readAsText(file);
        }

        // Auto backup reminder
        function setupAutoBackup() {
            const lastBackup = localStorage.getItem('bookiesplace_last_backup');
            const now = Date.now();
            const weekInMs = 7 * 24 * 60 * 60 * 1000;

            if (!lastBackup || (now - parseInt(lastBackup)) > weekInMs) {
                setTimeout(() => {
                    if (confirm('Weekly backup reminder! Would you like to export a backup now?')) {
                        exportBackup();
                        localStorage.setItem('bookiesplace_last_backup', now.toString());
                    }
                }, 5000);
            }
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Initialize on load
        init();
    </script>
</body>
</html>
